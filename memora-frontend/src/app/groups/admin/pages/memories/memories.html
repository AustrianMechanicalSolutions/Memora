<div class="ga-page">
  <div class="ga-page-header">
    <h2>Erinnerungen</h2>
    <button (click)="load()">Refresh</button>
  </div>

  <div class="ga-card ga-filters">
    <input [(ngModel)]="query.search" placeholder="Suche (Titel, Quote, Tags)..." />
    <select [(ngModel)]="query.sort">
      <option value="newest">Neueste zuerst</option>
      <option value="oldest">Älteste zuerst</option>
    </select>

    <input [(ngModel)]="query.from" type="date" />
    <input [(ngModel)]="query.to" type="date" />

    <select [(ngModel)]="query.type">
      <option value="">Alle Typen</option>
      <option value="Photo">Photo</option>
      <option value="Video">Video</option>
      <option value="Quote">Quote</option>
    </select>

    <input [(ngModel)]="query.albumId" placeholder="AlbumId (optional)" />

    <button (click)="applyFilters()">Filter anwenden</button>
  </div>

  <div *ngIf="loading" class="ga-note">Lade...</div>
  <div *ngIf="error" class="ga-error">{{ error }}</div>

  <div class="ga-card" *ngIf="!loading && !error">
    <div class="ga-note small">
      Total: {{ total }} | Seite {{ query.page }}
    </div>

    <div class="ga-list">
      <article class="ga-item" *ngFor="let m of items">
        <div class="ga-item-head">
          <div class="ga-item-title">
            <strong>{{ m.title || '(Ohne Titel)' }}</strong>
            <span class="ga-pill">{{ m.type }}</span>
          </div>
          <div class="ga-item-actions">
            <button (click)="delete(m)">Löschen (Placeholder)</button>
          </div>
        </div>

        <div class="ga-item-body">
          <div *ngIf="m.quoteText" class="ga-quote">“{{ m.quoteText }}” <span *ngIf="m.quoteBy">— {{ m.quoteBy }}</span></div>

          <div *ngIf="m.mediaUrl" class="ga-media">
            <a [href]="m.mediaUrl" target="_blank" rel="noopener">Media öffnen</a>
          </div>

          <div class="ga-meta">
            <span>Happened: {{ m.happenedAt | date:'mediumDate' }}</span>
            <span>Created: {{ m.createdAt | date:'medium' }}</span>
            <span *ngIf="m.albumId">Album: {{ m.albumId }}</span>
          </div>

          <div *ngIf="m.tags?.length" class="ga-tags">
            <span class="ga-tag" *ngFor="let t of m.tags">{{ t }}</span>
          </div>
        </div>
      </article>
    </div>

    <div class="ga-pager">
      <button (click)="prev()">Zurück</button>
      <button (click)="next()">Weiter</button>
    </div>

    <div class="ga-note small">
      ⚠️ Löschen ist PLACEHOLDER, weil Backend-Endpoint (DELETE memory) noch fehlt.
    </div>
  </div>
</div>
