<div class="page" *ngIf="group as g">
<<<<<<< HEAD

  <!-- Cover -->
  <div class="group-cover">
    <div class="cover-content">
      <h1 class="group-title">{{ g.name }}</h1>

      <div class="cover-meta">
        <span class="code">Invite code: {{ g.inviteCode }}</span>
        <span class="sep">‚Ä¢</span>
        <span>{{ g.memberCount }} members</span>
      </div>

      <button class="btn primary cover-action" (click)="goToAlbums()">
        üìö View albums
      </button>
    </div>
  </div>

  <!-- Content -->
  <div class="layout">

    <!-- MAIN COLUMN -->
    <div class="main">

      <!-- About -->
      <section class="card neutral">
        <h2>About this group</h2>

        <p>
          A place to collect our shared memories ‚Äî trips, moments, quotes,
          and everything in between. This description can be edited by the
          group creator.
        </p>

        <div class="about-meta">
          <div class="meta-item">
            <span class="label">Created by</span>
            <strong>{{ creatorName }}</strong>
          </div>

          <div class="meta-item">
            <span class="label">Created</span>
            <strong *ngIf="groupStats">{{ timeSince(groupStats.timeActive) }}</strong>
          </div>
        </div>
      </section>

      <!-- Activity -->
      <section class="card primary" *ngIf="weeklyActivity as w">
        <h2>This week in the group</h2>
        <span class="sub">Activity summary</span>

        <ul class="activity">
          <li *ngIf="w.photos">üì∏ {{ w.photos }} photos added</li>
          <li *ngIf="w.videos">üéûÔ∏è {{ w.videos }} videos uploaded</li>
          <li *ngIf="w.quotes">üìö {{ w.quotes }} quotes added</li>
          <li *ngIf="w.albums">üìö {{ w.albums }} new albums created</li>
        </ul>

        <div class="contributors" *ngIf="w.contributors.length">
          <span class="label">Recent contributors</span>

          <div class="avatars">
            <div class="avatar" *ngFor="let c of w.contributors">
              {{ c.charAt(0) }}
            </div>
          </div>
        </div>
      </section>

      <!-- Members -->
      <section class="card primary">
        <h2>Members</h2>
        <span class="sub">{{ members.length }} total</span>

        <div class="member-list">
          <div class="member" *ngFor="let u of memberActivity">
            <div class="avatar big">{{ u.name.charAt(0) }}</div>

            <div class="member-info">
              <div class="member-name">
                {{ u.name }}
                <span *ngIf="u.userId === creatorUserId" class="badge">üëë Creator</span>
              </div>

              <div class="member-meta">
                {{ u.role }} ¬∑ Joined {{ timeSince(u.joinedAt) }}
              </div>

              <div class="member-meta" *ngIf="u.lastActiveAt">
                Last active ¬∑ {{ timeSince(u.lastActiveAt) }}
              </div>

              <div class="badges">
                <span class="pill" *ngIf="u.userId === mostActiveUserId">üî• Most active</span>
                <span class="pill quote" *ngIf="u.userId === topQuoteUserId">üí¨ Most quotes</span>
                <span class="pill photo" *ngIf="u.userId === topPhotoUserId">üì∏ Most photos</span>
                <span class="pill video" *ngIf="u.userId === topVideoUserId">üéûÔ∏è Most videos</span>
              </div>
            </div>
          </div>
        </div>
      </section>

    </div>

    <!-- SIDE COLUMN -->
    <aside class="side">

      <!-- Stats -->
      <section class="card subtle">
        <h3>Group stats</h3>

        <div class="stats" *ngIf="groupStats as s">
          <div>
            <strong>{{ s.memoryCount }}</strong>
            <span>Memories</span>
          </div>

          <div>
            <strong>{{ s.albumCount }}</strong>
            <span>Albums</span>
          </div>

          <div>
            <strong>{{ timeSince(s.timeActive) }}</strong>
            <span>Active</span>
          </div>
        </div>
      </section>

      <!-- Timeline -->
      <section class="card">
        <h3>Timeline</h3>

        <div class="timeline">
          <div class="event">
            <span class="dot"></span>
            <div>
              <strong>Group created</strong>
              <span class="muted">4 years ago</span>
            </div>
          </div>

          <div class="event muted">
            <span class="dot"></span>
            <div>
              <strong>First album added</strong>
              <span>Coming soon</span>
            </div>
          </div>
        </div>
      </section>

    </aside>

  </div>
=======
  <header class="header">
    <div>
      <h1 class="title">{{ g.name }}</h1>
      <p class="subtitle">
        Invite Code: <b class="code">{{ g.inviteCode }}</b>
        <span class="dot">‚Ä¢</span>
        {{ g.memberCount }} members
      </p>
    </div>

    <button class="btn primary" (click)="showCreate = !showCreate">
      {{ showCreate ? 'Close' : '+ New Memory' }}
    </button>
  </header>

  <!-- Filters -->
  <section class="panel">
    <div class="panel-head">
      <h2 class="panel-title">Filters</h2>
      <button class="btn" (click)="reload()">Refresh</button>
    </div>

    <div class="filters">
      <div class="field">
        <label>Type</label>
        <select class="input" [(ngModel)]="fType" (change)="reload()">
          <option [ngValue]="null">All</option>
          <option [ngValue]="0">Photo</option>
          <option [ngValue]="1">Video</option>
          <option [ngValue]="2">Quote</option>
        </select>
      </div>

      <div class="field">
        <label>From</label>
        <input class="input" type="date" [(ngModel)]="fFrom" (change)="reload()" />
      </div>

      <div class="field">
        <label>To</label>
        <input class="input" type="date" [(ngModel)]="fTo" (change)="reload()" />
      </div>

      <div class="field grow">
        <label>Search</label>
        <input
          class="input"
          placeholder="Search title, quote, tags..."
          [(ngModel)]="fSearch"
          (keyup.enter)="reload()"
        />
      </div>

      <div class="field">
        <label>Sort</label>
        <select class="input" [(ngModel)]="fSort" (change)="reload()">
          <option value="newest">Newest</option>
          <option value="oldest">Oldest</option>
        </select>
      </div>
    </div>
  </section>

  <!-- Create -->
  <section class="panel" *ngIf="showCreate">
    <div class="panel-head">
      <h2 class="panel-title">New Memory</h2>
      <span class="muted">Add something to the timeline</span>
    </div>

    <div class="create-grid">
      <div class="field">
        <label>Type</label>
        <select class="input" [(ngModel)]="cType">
          <option [ngValue]="0">Photo</option>
          <option [ngValue]="1">Video</option>
          <option [ngValue]="2">Quote</option>
        </select>
      </div>

      <div class="field">
        <label>Date</label>
        <input class="input" type="date" [(ngModel)]="cHappenedAt" />
      </div>

      <div class="field full">
        <label>Title</label>
        <input class="input" [(ngModel)]="cTitle" placeholder="e.g. Funny moment in class" />
      </div>

      <div class="field full" *ngIf="cType === 2">
        <label>Quote</label>
        <textarea class="input textarea" [(ngModel)]="cQuoteText" placeholder="Write the quote..."></textarea>
      </div>

      <div class="field full" *ngIf="cType !== 2">
        <label>Media URL</label>
        <input class="input" [(ngModel)]="cMediaUrl" placeholder="https://..." />
      </div>

      <div class="field full">
        <label>Tags</label>
        <input class="input" [(ngModel)]="cTags" placeholder="fun, class, discord" />
      </div>
    </div>

    <div class="actions">
      <button class="btn primary" (click)="create()">Save Memory</button>
    </div>
  </section>

  <!-- Timeline -->
  <section class="panel">
    <div class="panel-head">
      <h2 class="panel-title">Timeline</h2>
      <span class="muted">{{ items.length }} shown</span>
    </div>

    <div class="timeline" *ngIf="items.length > 0; else emptyState">
      <div class="item" *ngFor="let m of items">
        <div class="line">
          <div class="dot-circle"></div>
        </div>

        <div class="card">
          <div class="card-top">
            <span class="type-pill">{{ typeLabel(m.type) }}</span>
            <span class="date">{{ m.happenedAt | date:'dd.MM.yyyy' }}</span>
          </div>

          <div class="card-title" *ngIf="m.title">{{ m.title }}</div>

          <div class="quote" *ngIf="m.type === 2">
            ‚Äú{{ m.quoteText }}‚Äù
          </div>

          <div class="media" *ngIf="m.type !== 2 && m.mediaUrl">
            <a class="link" [href]="m.mediaUrl" target="_blank">Open media</a>
          </div>

          <div class="tags" *ngIf="m.tags?.length">
            <span class="tag" *ngFor="let t of m.tags">#{{ t }}</span>
          </div>
        </div>
      </div>
    </div>

    <ng-template #emptyState>
      <div class="empty">
        <div class="empty-title">No memories yet</div>
        <div class="empty-sub">Click ‚Äú+ New Memory‚Äù to add the first one ‚ú®</div>
      </div>
    </ng-template>
  </section>
>>>>>>> origin/main
</div>
